const EXKEY = "d1e30f7e92dc3596611520f221788b1d";

export async function convertCurrency(amount: number, from: string, to: string): Promise<number> {
  const f = from.toUpperCase();
  const t = to.toUpperCase();
  const requestUrl = `https://api.fxratesapi.com/convert?from=${f}&to=${t}&amount=${amount}&format=json`;
  const response = await fetch(requestUrl);
  if (response.status !== 200) {
    throw Error("Failed to convert currency");
  }
  const data = await response.json() as any;
  if (data.success !== "true") {
    throw Error("Failed to convert currency");
  }
  const result = data.result as number;
  if (!result) {
    throw Error("Failed to convert currency");
  }

  return result;
}


